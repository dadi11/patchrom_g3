*** MobileDataStateTracker.smali	2016-03-23 22:37:32.331329364 +0100
--- MobileDataStateTracker.smali	2016-03-23 22:34:27.987329364 +0100
***************
*** 1030,1036 ****
      goto :goto_0
  .end method
  
  .method private setEnableApn(Ljava/lang/String;Z)I
      .locals 4
      .param p1, "apnType"    # Ljava/lang/String;
      .param p2, "enable"    # Z
--- 1110,1364 ----
      goto :goto_0
  .end method
  
+ .method private setEnableApnMSim(Ljava/lang/String;ZI)I
+     .locals 4
+     .param p1, "apnType"    # Ljava/lang/String;
+     .param p2, "enable"    # Z
+     .param p3, "slotId"    # I
+ 
+     .prologue
+     const/4 v2, 0x0
+ 
+     invoke-direct {p0, v2}, Landroid/net/MobileDataStateTracker;->getPhoneService(Z)V
+ 
+     const/4 v1, 0x0
+ 
+     .local v1, "retry":I
+     :goto_0
+     const/4 v2, 0x2
+ 
+     if-ge v1, v2, :cond_2
+ 
+     :try_start_0
+     iget-object v2, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v2, v2, p3
+ 
+     if-eqz v2, :cond_1
+ 
+     if-eqz p2, :cond_0
+ 
+     iget-object v2, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v2, v2, p3
+ 
+     invoke-interface {v2, p1}, Lcom/android/internal/telephony/ITelephony;->enableApnType(Ljava/lang/String;)I
+ 
+     move-result v2
+ 
+     :goto_1
+     return v2
+ 
+     :cond_0
+     iget-object v2, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v2, v2, p3
+ 
+     invoke-interface {v2, p1}, Lcom/android/internal/telephony/ITelephony;->disableApnType(Ljava/lang/String;)I
+     :try_end_0
+     .catch Landroid/os/RemoteException; {:try_start_0 .. :try_end_0} :catch_0
+ 
+     move-result v2
+ 
+     goto :goto_1
+ 
+     :catch_0
+     move-exception v0
+ 
+     .local v0, "e":Landroid/os/RemoteException;
+     if-nez v1, :cond_1
+ 
+     const/4 v2, 0x1
+ 
+     invoke-direct {p0, v2}, Landroid/net/MobileDataStateTracker;->getPhoneService(Z)V
+ 
+     .end local v0    # "e":Landroid/os/RemoteException;
+     :cond_1
+     add-int/lit8 v1, v1, 0x1
+ 
+     goto :goto_0
+ 
+     :cond_2
+     new-instance v2, Ljava/lang/StringBuilder;
+ 
+     invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V
+ 
+     const-string v3, "setEnableApnMSim Could not "
+ 
+     invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v3
+ 
+     if-eqz p2, :cond_3
+ 
+     const-string v2, "enable"
+ 
+     :goto_2
+     invoke-virtual {v3, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v2
+ 
+     const-string v3, " APN type \""
+ 
+     invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v2
+ 
+     invoke-virtual {v2, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v2
+ 
+     const-string v3, "\""
+ 
+     invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v2
+ 
+     invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+ 
+     move-result-object v2
+ 
+     invoke-direct {p0, v2}, Landroid/net/MobileDataStateTracker;->loge(Ljava/lang/String;)V
+ 
+     const/4 v2, 0x3
+ 
+     goto :goto_1
+ 
+     :cond_3
+     const-string v2, "disable"
+ 
+     goto :goto_2
+ .end method
+ 
  .method private setEnableApn(Ljava/lang/String;Z)I
+     .locals 5
+     .param p1, "apnType"    # Ljava/lang/String;
+     .param p2, "enable"    # Z
+ 
+     .prologue
+     const/4 v3, 0x0
+ 
+     invoke-direct {p0, v3}, Landroid/net/MobileDataStateTracker;->getPhoneService(Z)V
+ 
+     invoke-static {}, Lmiui/telephony/SubscriptionManager;->getDefault()Lmiui/telephony/SubscriptionManager;
+ 
+     move-result-object v3
+ 
+     invoke-virtual {v3}, Lmiui/telephony/SubscriptionManager;->getDefaultDataSlotId()I
+ 
+     move-result v0
+ 
+     .local v0, "dds":I
+     const/4 v2, 0x0
+ 
+     .local v2, "retry":I
+     :goto_0
+     const/4 v3, 0x2
+ 
+     if-ge v2, v3, :cond_2
+ 
+     :try_start_0
+     iget-object v3, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v3, v3, v0
+ 
+     if-eqz v3, :cond_1
+ 
+     if-eqz p2, :cond_0
+ 
+     iget-object v3, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v3, v3, v0
+ 
+     invoke-interface {v3, p1}, Lcom/android/internal/telephony/ITelephony;->enableApnType(Ljava/lang/String;)I
+ 
+     move-result v3
+ 
+     :goto_1
+     return v3
+ 
+     :cond_0
+     iget-object v3, p0, Landroid/net/MobileDataStateTracker;->mPhoneServices:[Lcom/android/internal/telephony/ITelephony;
+ 
+     aget-object v3, v3, v0
+ 
+     invoke-interface {v3, p1}, Lcom/android/internal/telephony/ITelephony;->disableApnType(Ljava/lang/String;)I
+     :try_end_0
+     .catch Landroid/os/RemoteException; {:try_start_0 .. :try_end_0} :catch_0
+ 
+     move-result v3
+ 
+     goto :goto_1
+ 
+     :catch_0
+     move-exception v1
+ 
+     .local v1, "e":Landroid/os/RemoteException;
+     if-nez v2, :cond_1
+ 
+     const/4 v3, 0x1
+ 
+     invoke-direct {p0, v3}, Landroid/net/MobileDataStateTracker;->getPhoneService(Z)V
+ 
+     .end local v1    # "e":Landroid/os/RemoteException;
+     :cond_1
+     add-int/lit8 v2, v2, 0x1
+ 
+     goto :goto_0
+ 
+     :cond_2
+     new-instance v3, Ljava/lang/StringBuilder;
+ 
+     invoke-direct {v3}, Ljava/lang/StringBuilder;-><init>()V
+ 
+     const-string v4, "Could not "
+ 
+     invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v4
+ 
+     if-eqz p2, :cond_3
+ 
+     const-string v3, "enable"
+ 
+     :goto_2
+     invoke-virtual {v4, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v3
+ 
+     const-string v4, " APN type \""
+ 
+     invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v3
+ 
+     invoke-virtual {v3, p1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v3
+ 
+     const-string v4, "\""
+ 
+     invoke-virtual {v3, v4}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;
+ 
+     move-result-object v3
+ 
+     invoke-virtual {v3}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;
+ 
+     move-result-object v3
+ 
+     invoke-direct {p0, v3}, Landroid/net/MobileDataStateTracker;->loge(Ljava/lang/String;)V
+ 
+     const/4 v3, 0x3
+ 
+     goto :goto_1
+ 
+     :cond_3
+     const-string v3, "disable"
+ 
+     goto :goto_2
+ .end method
+ 
+ .method private setEnableApn_aosp(Ljava/lang/String;Z)I
      .locals 4
      .param p1, "apnType"    # Ljava/lang/String;
      .param p2, "enable"    # Z
